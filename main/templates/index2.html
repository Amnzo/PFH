{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <link rel="icon" type="image/png" href="{% static 'img/favicon.ico' %}">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet">


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance Habitat - Ensemble, assurons votre confort</title>

</head>
<body>
    <header class="footer">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <img src="{% static 'img/logo.png' %}" alt="Performance Habitat Logo" class="logo-img">
                    <div class="logo-text">
                        <div class="logo-title">Performance <span>Habitat</span></div>
                        <div class="logo-subtitle">NEUF & R√âNOVATION - Ensemble, assurons votre confort</div>
                    </div>
                </div>

                <button class="menu-toggle" onclick="toggleMenu()">‚ò∞</button>

                <div class="header-slogan-container">
                    <div class="header-slogan">SUBLIMONS ET R√âNOVONS VOTRE HABITAT</div>
                    <div class="header-creation-date">Entreprise cr√©√©e en 2013</div>
                </div>



                <ul class="nav-menu" id="navMenu">
                    <li><a href="#accueil">Accueil</a></li>
                    <li><a href="#apropos">√Ä propos</a></li>
                    <li><a href="#services">Services</a></li>
                    <li><a href="#pompe-chaleur">Salle de bain cl√© en main</a></li>
                    <li><a href="#realisations">R√©alisations</a></li>
                    <li><a href="#temoignages">T√©moignages</a></li>
                    <li><a href="#zone">Zone</a></li>
                    <li><a href="#contact">Contact</a></li>
                    <li>
                        <a href="https://www.instagram.com/performancehabitat29/" target="_blank" class="nav-instagram">
                            Instagram
                        </a>
                    </li>

                    <li>
                    <a href="https://web.facebook.com/profile.php?id=61583620142892" target="_blank" class="nav-facebook">
                        Facebook
                    </a>
</li>

                </ul>
            </div>
        </div>
    </header>

   <section id="accueil" class="hero">
    <div class="slider-container">

        <!-- Overlay sombre -->
        <div class="slider-overlay"></div>

        <div class="slider-item active">
            <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=1200&h=600&fit=crop" alt="projet 0">
        </div>


         <div class="slider-item">
            <img src="{% static 'img/2.jpeg' %}" alt="Projet 3">
        </div>
         <div class="slider-item">
             <img src="{% static 'img/4.jpg' %}" alt="Projet 3">
        </div>

         <div class="slider-item">
            <img src="{% static 'img/3.jpeg' %}" alt="Projet 3">
        </div>



         <div class="slider-item">
             <img src="{% static 'img/s1.jpeg' %}" alt="Projet 3">
        </div>











        <div class="hero-content">
            <h1>L'interlocuteur <span>unique pour tous vos travaux</span></h1>
           <p class="services">Plomberie - Chauffage - √âlectricit√© - Carrelage & Sols - Cloisons S√®ches - Peinture</p>

            <button class="cta-button" onclick="document.getElementById('contact').scrollIntoView({behavior: 'smooth'})">Demander un devis gratuit</button>
        </div>

        <div class="slider-controls" id="sliderControls"></div>
        <div class="slider-arrow slider-prev" onclick="prevSlide()">‚ùÆ</div>
        <div class="slider-arrow slider-next" onclick="nextSlide()">‚ùØ</div>

    </div>
</section>



    <section id="apropos" class="footer">
        <div class="container">
            <h2 class="section-title">√Ä propos de <span>Performance Habitat</span></h2>
            <p class="section-subtitle">Votre artisan sp√©cialiste en r√©novation et am√©lioration √©nerg√©tique</p>

            <div class="about-content">
                <div class="about-text">
                    <h3>Votre expert en r√©novation</h3>
                    <p>Performance Habitat, entreprise de proximit√© cr√©√©e en 2013,
                        sera votre partenaire privil√©gi√© pour tous vos projets de r√©novation et d‚Äôam√©lioration de l‚Äôhabitat dans la r√©gion brestoise. </p>

                      <p>Performance Habitat est votre interlocuteur unique pour tous vos travaux int√©rieurs, de A √† Z : √©lectricit√©, plomberie, plaques de pl√¢tre, sols et peinture.</p>
                    <p>Nos principaux atouts sont le professionnalisme, la satisfaction de nos clients et la proximit√© avec vous. </p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">15+</div>
                        <div class="stat-label">Ann√©es d'exp√©rience</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">500+</div>
                        <div class="stat-label">Projets r√©alis√©s</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">100%</div>
                        <div class="stat-label">Clients satisfaits</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

   <section id="services" class="footer">
        <div class="container">
            <h2 class="section-title">Nos <span>Services</span></h2>
            <p class="section-subtitle">Des solutions compl√®tes pour tous vos projets de r√©novation</p>
            <div class="services-grid">
                {% for service in services %}
                <div class="service-card">
                    {% if service.image %}
                    <div class="service-image">
                        <img src="{{ service.image.url }}" alt="{{ service.titre }}" class="service-img">
                    </div>
                    {% endif %}
                    <div class="service-card-content">
                        <h3>{{ service.titre }}</h3>
                        <p>{{ service.description }}</p>
                        {% if service.details.all %}
                        <ul>
                            {% for detail in service.details.all %}
                            <li>{{ detail.texte }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                </div>
                {% empty %}
                <p style="color: var(--gris-clair); text-align: center; grid-column: 1/-1;">Nos services seront bient√¥t disponibles.</p>
                {% endfor %}
            </div>
        </div>
    </section>

<section id="pompe-chaleur" class="footer">
  <div class="container">
    <h2 class="section-title">
      Performance Habitat entreprise sp√©cialis√©e dans
      <span>la salle de bain cl√© en main</span>
    </h2>

    <div class="about-content" style="display: grid; grid-template-columns: 1fr 1fr; gap: 3rem; align-items: start;">

      <!-- Partie Texte √† Gauche -->
      <div class="about-text">
        <h3 class="uppercase font-bold" style="color: var(--vert-fluo); margin-bottom: 1.5rem;">
          Parlez-nous de vos go√ªts et envies, Performance Habitat s'occupe du reste
        </h3>

        <h4>
          CONCEPTION, R√âALISATION ET CHOIX DE QUALIT√â... UNE PLUS-VALUE POUR VOTRE MAISON
        </h4>

        <h4 style="font-size: 1.2rem; margin-bottom: 1rem;">
          <span style="color: var(--vert-fluo);">Choisir Performance Habitat</span>,
          c'est s'assurer d'une salle de bain de qualit√©.
        </h4>

        <p class="text-lg" style="line-height: 1.8;">
          En effet, nous vous proposerons et insisterons toujours sur le choix de mat√©riaux professionnels
          pour une salle de bain qui durera dans le temps et vous apportera un r√©el plaisir au quotidien.
        </p>

        <p class="text-lg" style="line-height: 1.8; margin-top: 1rem;">
          Du sanitaire aux √©l√©ments de d√©coration, nous vous conseillerons et r√©fl√©chirons avec vous
          √† sa conception optimale, en nous adaptant au mieux √† votre chez-vous.
        </p>

        <p class="text-lg" style="line-height: 1.8; margin-top: 1rem;">
          <strong>Une salle de bain chez Performance Habitat, c'est avant tout un endroit de paix
          o√π l'on se sent bien‚Ä¶</strong>
        </p>
      </div>

      <!-- Galerie Images Avant/Apr√®s √† Droite -->
      <div class="bathroom-gallery">
        <h3 style="text-align: center; margin-bottom: 2rem; color: var(--vert-fluo); font-weight: bold;">
          Nos R√©alisations - Avant / Apr√®s
        </h3>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">

          <!-- Projet 1 -->
          <div class="gallery-item" onclick="openLightbox(0)">
            <div style="position: relative; overflow: hidden; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); cursor: pointer;">
              <img src="{% static 'img/avant1.jpeg' %}" alt="Salle de bain avant r√©novation 1"
                   style="width: 100%; height: 200px; object-fit: cover;">
              <div style="position: absolute; top: 10px; left: 10px; background: rgba(255,0,0,0.8); color: white; padding: 5px 10px; border-radius: 4px; font-weight: bold;">
                AVANT
              </div>
            </div>
          </div>

          <div class="gallery-item" onclick="openLightbox(1)">
            <div style="position: relative; overflow: hidden; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); cursor: pointer;">
               <img src="{% static 'img/apres1.jpeg' %}"  alt="Salle de bain apr√®s r√©novation 1"
                   style="width: 100%; height: 200px; object-fit: cover;">
              <div style="position: absolute; top: 10px; left: 10px; background: rgba(0,200,0,0.8); color: white; padding: 5px 10px; border-radius: 4px; font-weight: bold;">
                APR√àS
              </div>
            </div>
          </div>

          <!-- Projet 2 -->
          <div class="gallery-item" onclick="openLightbox(2)">
            <div style="position: relative; overflow: hidden; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); cursor: pointer;">
              <img src="{% static 'img/avant2.jpeg' %}" alt="Salle de bain avant r√©novation 2"
                   style="width: 100%; height: 200px; object-fit: cover;">
              <div style="position: absolute; top: 10px; left: 10px; background: rgba(255,0,0,0.8); color: white; padding: 5px 10px; border-radius: 4px; font-weight: bold;">
                AVANT
              </div>
            </div>
          </div>

          <div class="gallery-item" onclick="openLightbox(3)">
            <div style="position: relative; overflow: hidden; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); cursor: pointer;">
              <img src="{% static 'img/apres2.jpeg' %}" alt="Salle de bain apr√®s r√©novation 2"
                   style="width: 100%; height: 200px; object-fit: cover;">
              <div style="position: absolute; top: 10px; left: 10px; background: rgba(0,200,0,0.8); color: white; padding: 5px 10px; border-radius: 4px; font-weight: bold;">
                APR√àS
              </div>
            </div>
          </div>

          <!-- Projet 4 -->
          <div class="gallery-item" onclick="openLightbox(4)">
            <div style="position: relative; overflow: hidden; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); cursor: pointer;">
              <img src="{% static 'img/avant4.jpeg' %}" alt="Salle de bain avant r√©novation 4"
                   style="width: 100%; height: 200px; object-fit: cover;">
              <div style="position: absolute; top: 10px; left: 10px; background: rgba(255,0,0,0.8); color: white; padding: 5px 10px; border-radius: 4px; font-weight: bold;">
                AVANT
              </div>
            </div>
          </div>

          <div class="gallery-item" onclick="openLightbox(5)">
            <div style="position: relative; overflow: hidden; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); cursor: pointer;">
              <img src="{% static 'img/apres4.jpeg' %}" alt="Salle de bain apr√®s r√©novation 4"
                   style="width: 100%; height: 200px; object-fit: cover;">
              <div style="position: absolute; top: 10px; left: 10px; background: rgba(0,200,0,0.8); color: white; padding: 5px 10px; border-radius: 4px; font-weight: bold;">
                APR√àS
              </div>
            </div>
          </div>

          <!-- Projet 3 -->
          <div class="gallery-item" onclick="openLightbox(6)">
            <div style="position: relative; overflow: hidden; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); cursor: pointer;">
              <img src="{% static 'img/avant3.jpeg' %}" alt="Salle de bain avant r√©novation 3"
                   style="width: 100%; height: 200px; object-fit: cover;">
              <div style="position: absolute; top: 10px; left: 10px; background: rgba(255,0,0,0.8); color: white; padding: 5px 10px; border-radius: 4px; font-weight: bold;">
                AVANT
              </div>
            </div>
          </div>

          <div class="gallery-item" onclick="openLightbox(7)">
            <div style="position: relative; overflow: hidden; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); cursor: pointer;">
              <img src="{% static 'img/apres3.jpeg' %}" alt="Salle de bain apr√®s r√©novation 3"
                   style="width: 100%; height: 200px; object-fit: cover;">
              <div style="position: absolute; top: 10px; left: 10px; background: rgba(0,200,0,0.8); color: white; padding: 5px 10px; border-radius: 4px; font-weight: bold;">
                APR√àS
              </div>
            </div>
          </div>

        </div>
      </div>

    </div>
  </div>

  <!-- Modal Lightbox pour le Diaporama -->
  <div id="lightbox" class="lightbox">
    <span class="close-lightbox" onclick="closeLightbox()">&times;</span>
    <span class="prev-lightbox" onclick="changeSlide(-1)">&#10094;</span>
    <span class="next-lightbox" onclick="changeSlide(1)">&#10095;</span>

    <div class="lightbox-content">
      <img id="lightbox-image" src="" alt="">
      <div id="lightbox-badge" class="lightbox-badge"></div>
      <div class="lightbox-counter">
        <span id="current-slide">1</span> / <span id="total-slides">8</span>
      </div>
    </div>
  </div>

  <style>
    @media (max-width: 768px) {
      .about-content {
        grid-template-columns: 1fr !important;
      }

      .bathroom-gallery {
        margin-top: 2rem;
      }
    }

    .gallery-item img {
      transition: transform 0.3s ease;
    }

    .gallery-item:hover img {
      transform: scale(1.05);
    }

    /* Styles pour le Lightbox */
    .lightbox {
      display: none;
      position: fixed;
      z-index: 9999;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.95);
      animation: fadeIn 0.3s;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .lightbox-content {
      position: relative;
      margin: auto;
      padding: 20px;
      width: 90%;
      max-width: 1200px;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
    }

    #lightbox-image {
      max-width: 100%;
      max-height: 80vh;
      object-fit: contain;
      border-radius: 8px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
    }

    .lightbox-badge {
      position: absolute;
      top: 30px;
      left: 30px;
      padding: 10px 20px;
      border-radius: 6px;
      font-weight: bold;
      font-size: 1.1rem;
      color: white;
      z-index: 10000;
    }

    .close-lightbox {
      position: absolute;
      top: 20px;
      right: 40px;
      color: white;
      font-size: 50px;
      font-weight: bold;
      cursor: pointer;
      z-index: 10001;
      transition: color 0.3s;
    }

    .close-lightbox:hover {
      color: #ff4444;
    }

    .prev-lightbox,
    .next-lightbox {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      color: white;
      font-size: 40px;
      font-weight: bold;
      cursor: pointer;
      padding: 20px;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 50%;
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.3s;
      z-index: 10001;
    }

    .prev-lightbox:hover,
    .next-lightbox:hover {
      background: rgba(0, 0, 0, 0.8);
    }

    .prev-lightbox {
      left: 20px;
    }

    .next-lightbox {
      right: 20px;
    }

    .lightbox-counter {
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      color: white;
      font-size: 1.2rem;
      background: rgba(0, 0, 0, 0.6);
      padding: 10px 20px;
      border-radius: 25px;
    }

    @media (max-width: 768px) {
      .prev-lightbox,
      .next-lightbox {
        font-size: 30px;
        width: 50px;
        height: 50px;
      }

      .close-lightbox {
        font-size: 40px;
        right: 20px;
      }

      .lightbox-badge {
        top: 70px;
        left: 20px;
        font-size: 0.9rem;
        padding: 8px 15px;
      }
    }
  </style>

  <script>
   // Tableau des images pour le diaporama
    const galleryImages = [
      { src: "{% static 'img/avant1.jpeg' %}", alt: "Salle de bain avant r√©novation 1", type: "AVANT" },
      { src: "{% static 'img/apres1.jpeg' %}", alt: "Salle de bain apr√®s r√©novation 1", type: "APR√àS" },
      { src: "{% static 'img/avant2.jpeg' %}", alt: "Salle de bain avant r√©novation 2", type: "AVANT" },
      { src: "{% static 'img/apres2.jpeg' %}", alt: "Salle de bain apr√®s r√©novation 2", type: "APR√àS" },
      { src: "{% static 'img/avant4.jpeg' %}", alt: "Salle de bain avant r√©novation 4", type: "AVANT" },
      { src: "{% static 'img/apres4.jpeg' %}", alt: "Salle de bain apr√®s r√©novation 4", type: "APR√àS" },
      { src: "{% static 'img/avant3.jpeg' %}", alt: "Salle de bain avant r√©novation 3", type: "AVANT" },
      { src: "{% static 'img/apres3.jpeg' %}", alt: "Salle de bain apr√®s r√©novation 3", type: "APR√àS" }
    ];

    let currentLightboxIndex = 0;

    function openLightbox(index) {
      currentLightboxIndex = index;
      showLightboxSlide(currentLightboxIndex);
      document.getElementById('lightbox').style.display = 'block';
      document.body.style.overflow = 'hidden';
    }

    function closeLightbox() {
      document.getElementById('lightbox').style.display = 'none';
      document.body.style.overflow = 'auto';
    }

    function changeSlide(direction) {
      currentLightboxIndex += direction;
      if (currentLightboxIndex >= galleryImages.length) {
        currentLightboxIndex = 0;
      } else if (currentLightboxIndex < 0) {
        currentLightboxIndex = galleryImages.length - 1;
      }
      showLightboxSlide(currentLightboxIndex);
    }

    function showLightboxSlide(index) {
      const image = galleryImages[index];
      document.getElementById('lightbox-image').src = image.src;
      document.getElementById('lightbox-image').alt = image.alt;
      document.getElementById('current-slide').textContent = index + 1;
      document.getElementById('total-slides').textContent = galleryImages.length;

      const badge = document.getElementById('lightbox-badge');
      badge.textContent = image.type;
      if (image.type === 'AVANT') {
        badge.style.background = 'rgba(255,0,0,0.8)';
      } else {
        badge.style.background = 'rgba(0,200,0,0.8)';
      }
    }
  </script>

</section>

    <section id="realisations" class="footer">
        <div class="container">
            <h2 class="section-title">Nos <span>R√©alisations</span></h2>
            <p class="section-subtitle">D√©couvrez quelques-uns de nos projets r√©cents</p>
            <div class="realisation-grid">
                {% for projet in projects %}
                <div class="realisation-card" onclick="openProjectGallery('{{ projet.id }}')">
                    {% if projet.image %}
                    <div class="realisation-image">
                        <img src="{{ projet.image.url }}" alt="{{ projet.titre }}">
                        {% if projet.images.count > 0 %}
                        <div class="image-badge">
                            üì∑ +{{ projet.images.count }} photos
                        </div>
                        {% endif %}
                    </div>
                    {% endif %}
                    <div class="realisation-content">
                        <h3>{{ projet.titre }}</h3>
                        <p>{{ projet.description|safe|truncatewords_html:30 }}</p>
                    </div>
                </div>
                {% empty %}
                <p style="color: var(--gris-clair); text-align: center; grid-column: 1/-1;">Nos r√©alisations seront bient√¥t disponibles.</p>
                {% endfor %}
            </div>
        </div>
    </section>

    <section id="temoignages" class="footer">
        <div class="container">
            <h2 class="section-title">T√©moignages <span>Clients</span></h2>
            <p class="section-subtitle">Ce que nos clients disent de nous</p>
            <div class="temoignage-grid">
                {% for t in temoignages %}
                <div class="temoignage-card">
                    <div class="quote-icon">"</div>
                    <div class="temoignage-content">
                        <p class="temoignage-text">"{{ t.texte }}"</p>
                        <div class="temoignage-author">{{ t.nom }}{% if t.localisation %} - {{ t.localisation }}{% endif %}</div>
                    </div>
                </div>
                {% empty %}
                <p style="color: var(--gris-clair); text-align: center; grid-column: 1/-1;">Les t√©moignages arrivent bient√¥t.</p>
                {% endfor %}
            </div>
        </div>
    </section>

    <section id="zone" class="footer">
        <div class="container">
            <h2 class="section-title">Notre <span>Zone d'Intervention</span></h2>
            <div class="zone-content">
                <p>Nous intervenons principalement dans le Finist√®re et ses alentours :</p>
                <div style="background: var(--vert-fluo); color: var(--gris-fonce); padding: 2rem; border-radius: 15px; font-weight: 700; margin: 2rem 0;">
                    BREST ‚Ä¢ GUILERS ‚Ä¢ PLOUZAN√â ‚Ä¢ LE RELECQ-KERHUON ‚Ä¢ BOHARS ‚Ä¢ GOUESNOU ‚Ä¢ PLABENNEC ‚Ä¢ LANNILIS
                </div>
            </div>
        </div>
    </section>

    <section id="contact" class="footer">
    <div class="container">
        <h2 class="section-title">Contactez-<span>nous</span></h2>
        <p class="section-subtitle">Demandez votre devis gratuit et sans engagement</p>

        <div class="contact-wrapper">
            <div class="contact-info">
                <h3>Nos coordonn√©es</h3>
                <div class="info-item">
                    <div class="info-icon">üìû</div>
                    <div>
                        <div><strong>06 50 03 47 77</strong></div>
                        <div>06 35 13 02 99</div>
                    </div>
                </div>
                <div class="info-item">
                    <div class="info-icon">‚úâÔ∏è</div>
                    <div>performancehabitat29@gmail.com</div>
                </div>
                <div class="info-item">
                    <div class="info-icon">üè¢</div>
                    <div>Lieu-dit Penfeld - 29820 GUILERS</div>
                </div>
            </div>

            <div class="contact-form">

                    <form id="contactForm" method="post" enctype="multipart/form-data">

                    {% csrf_token %}

                    <div class="form-group">
                        <label for="name">Nom et Pr√©nom</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="phone">T√©l√©phone</label>
                        <input type="tel" id="phone" name="phone" required>
                    </div>
                    <div class="form-group">
                        <label for="service">Service souhait√©</label>
                        <select id="service" name="service" required>
                            <option value="">S√©lectionnez un service</option>
                            <option value="salle-de-bain">Salle de bain</option>
                            <option value="electricite">√âlectricit√©</option>
                            <option value="plomberie">Plomberie</option>
                            <option value="chauffage">Chauffage</option>
                            <option value="pompe-chaleur">Pompe √† chaleur</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="message">Description de votre projet</label>
                        <textarea id="message" name="message" required></textarea>
                    </div>

                    <!-- NOUVEAU : Zone de t√©l√©chargement de fichiers -->
                    <div class="form-group">
                        <label for="files">Photos de la pi√®ce √† r√©nover (optionnel)</label>
                        <div class="file-upload-wrapper">
                            <input type="file" id="files" name="files[]" multiple accept="image/*,.pdf" class="file-input">
                            <label for="files" class="file-label">
                                <span class="file-icon">üìé</span>
                                <span class="file-text">Cliquez pour ajouter des photos</span>
                            </label>
                            <div id="fileList" class="file-list"></div>
                        </div>
                        <small class="file-info">Formats accept√©s : JPG, PNG, PDF (max 5 fichiers, 5 Mo chacun)</small>
                    </div>

                    <button type="submit" class="cta-button" style="width: 100%;">Envoyer ma demande</button>
                </form>
                <div id="formMessage"></div>
            </div>
        </div>
    </div>
</section>
    <footer class="footer">
        <div class="container">
            <div class="footer-banner">
                AVEC PERFORMANCE HABITAT, VALORISEZ VOTRE PATRIMOINE IMMOBILIER
            </div>
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Performance Habitat</h4>
                    <p>Votre artisan local sp√©cialiste en r√©novation et am√©lioration √©nerg√©tique dans le Finist√®re.</p>
                </div>
                <div class="footer-section">
                    <h4>Contact</h4>
                    <p><strong>06 50 03 47 77</strong></p>
                    <p>performancehabitat29@gmail.com</p>
                    <p>Lieu-dit Penfeld - 29820 GUILERS</p>

                    <p>N¬∞ SIRET : 793 768 565 00012 / Capital social : 12 500 ‚Ç¨</p>

                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Performance Habitat. Tous droits r√©serv√©s.</p>
            </div>
        </div>
    </footer>

    <!-- MODAL GALERIE -->
    <div id="projectGalleryModal" class="modal-gallery">
        <div class="modal-gallery-content">
            <div class="modal-header">
                <div class="modal-title">
                    Galerie <span id="projectTitle">du Projet</span>
                </div>
                <button class="modal-close" onclick="closeProjectGallery()">&times;</button>
            </div>

            <div class="carousel-main">
                <img id="mainImage" src="" alt="Image principale">
                <div class="carousel-counter">
                    <span id="currentIndex">1</span> / <span id="totalImages">0</span>
                </div>
                <div class="carousel-controls">
                    <button class="carousel-btn" onclick="prevImage()">‚ùÆ</button>
                    <button class="carousel-btn" onclick="nextImage()">‚ùØ</button>
                </div>
            </div>

            <div class="thumbnails-section">
                <div class="thumbnails-title">Toutes les photos du projet</div>
                <div class="thumbnails-grid" id="thumbnailsGrid"></div>
            </div>

            <div class="modal-footer">
                <p>Cliquez sur une vignette pour afficher l'image. Utilisez les fl√®ches ou votre clavier pour naviguer.</p>
            </div>
        </div>
    </div>

   <script>
        // ===== SLIDER HERO =====
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slider-item');

        function initSliderDots() {
            const controlsContainer = document.getElementById('sliderControls');
            controlsContainer.innerHTML = '';
            for (let i = 0; i < slides.length; i++) {
                const dot = document.createElement('div');
                dot.className = 'slider-dot' + (i === 0 ? ' active' : '');
                dot.onclick = () => goToSlide(i);
                controlsContainer.appendChild(dot);
            }
        }

        function showSlide(n) {
            slides.forEach(slide => slide.classList.remove('active'));
            document.querySelectorAll('.slider-dot').forEach(dot => dot.classList.remove('active'));

            slides[n].classList.add('active');
            document.querySelectorAll('.slider-dot')[n].classList.add('active');
        }

        function nextSlide() {
            currentSlide = (currentSlide + 1) % slides.length;
            showSlide(currentSlide);
        }

        function prevSlide() {
            currentSlide = (currentSlide - 1 + slides.length) % slides.length;
            showSlide(currentSlide);
        }

        function goToSlide(n) {
            currentSlide = n;
            showSlide(currentSlide);
        }

        setInterval(nextSlide, 5000);
        initSliderDots();

        // ===== MENU MOBILE =====
        function toggleMenu() {
            const navMenu = document.getElementById('navMenu');
            navMenu.classList.toggle('active');
        }

        document.querySelectorAll('.nav-menu a').forEach(link => {
            link.addEventListener('click', () => {
                document.getElementById('navMenu').classList.remove('active');
            });
        });

        // ===== FORMULAIRE =====
        document.getElementById('contactForm').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Merci pour votre message ! Nous vous recontacterons rapidement.');
            this.reset();
        });

        // ===== GALERIE PROJETS =====
        const projects = {
            {% for projet in projects %}
            '{{ projet.id }}': {
                title: '{{ projet.titre|escapejs }}',
                images: [
                    '{{ projet.image.url }}',
                    {% for img in projet.images.all %}
                    '{{ img.image.url }}',
                    {% endfor %}
                ]
            },
            {% endfor %}
        };

        let currentProjectId = null;
        let currentImageIndex = 0;

        function openProjectGallery(projectId) {
            currentProjectId = projectId;
            currentImageIndex = 0;
            const project = projects[projectId];

            if (!project) return;

            document.getElementById('projectTitle').textContent = project.title;
            const thumbnailsGrid = document.getElementById('thumbnailsGrid');
            thumbnailsGrid.innerHTML = '';

            project.images.forEach((img, index) => {
                const thumb = document.createElement('div');
                thumb.className = `thumbnail ${index === 0 ? 'active' : ''}`;
                thumb.innerHTML = `<img src="${img}" alt="Photo ${index + 1}">`;
                thumb.onclick = () => goToImage(index);
                thumbnailsGrid.appendChild(thumb);
            });

            displayImage(0);
            document.getElementById('totalImages').textContent = project.images.length;
            document.getElementById('projectGalleryModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeProjectGallery() {
            document.getElementById('projectGalleryModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function displayImage(index) {
            const project = projects[currentProjectId];
            if (!project) return;

            const mainImg = document.getElementById('mainImage');
            mainImg.src = project.images[index];
            document.getElementById('currentIndex').textContent = index + 1;

            document.querySelectorAll('.thumbnail').forEach((thumb, i) => {
                thumb.classList.toggle('active', i === index);
            });

            currentImageIndex = index;
        }

        function nextImage() {
            const project = projects[currentProjectId];
            if (!project) return;
            currentImageIndex = (currentImageIndex + 1) % project.images.length;
            displayImage(currentImageIndex);
        }

        function prevImage() {
            const project = projects[currentProjectId];
            if (!project) return;
            currentImageIndex = (currentImageIndex - 1 + project.images.length) % project.images.length;
            displayImage(currentImageIndex);
        }

        function goToImage(index) {
            displayImage(index);
        }

        // Navigation clavier
        document.addEventListener('keydown', (e) => {
            if (document.getElementById('projectGalleryModal').classList.contains('active')) {
                if (e.key === 'ArrowRight') nextImage();
                if (e.key === 'ArrowLeft') prevImage();
                if (e.key === 'Escape') closeProjectGallery();
            }
        });

        // Fermer en cliquant hors du modal
        document.getElementById('projectGalleryModal').addEventListener('click', (e) => {
            if (e.target.id === 'projectGalleryModal') {
                closeProjectGallery();
            }
        });

        // Smooth scroll
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        // Gestion de l'upload de fichiers
const fileInput = document.getElementById('files');
const fileList = document.getElementById('fileList');
const fileLabel = document.querySelector('.file-label');

let selectedFiles = [];

fileInput.addEventListener('change', function(e) {
    const files = Array.from(e.target.files);

    // Limiter √† 5 fichiers
    if (selectedFiles.length + files.length > 5) {
        alert('Maximum 5 fichiers autoris√©s');
        return;
    }

    files.forEach(file => {
        // V√©rifier la taille (5 Mo max)
        if (file.size > 5 * 1024 * 1024) {
            alert(`${file.name} est trop volumineux (max 5 Mo)`);
            return;
        }

        selectedFiles.push(file);
        displayFile(file);
    });

    updateFileLabel();
});

function displayFile(file) {
    const fileItem = document.createElement('div');
    fileItem.className = 'file-item';

    const fileName = document.createElement('span');
    fileName.className = 'file-item-name';
    fileName.textContent = file.name;

    const fileSize = document.createElement('span');
    fileSize.className = 'file-item-size';
    fileSize.textContent = formatFileSize(file.size);

    const removeBtn = document.createElement('button');
    removeBtn.className = 'file-remove';
    removeBtn.textContent = '‚úï';
    removeBtn.type = 'button';
    removeBtn.onclick = () => removeFile(file, fileItem);

    fileItem.appendChild(fileName);
    fileItem.appendChild(fileSize);
    fileItem.appendChild(removeBtn);
    fileList.appendChild(fileItem);
}

function removeFile(file, fileItem) {
    selectedFiles = selectedFiles.filter(f => f !== file);
    fileItem.remove();
    updateFileLabel();
}

function formatFileSize(bytes) {
    if (bytes === 0) return '0 Bytes';
    const k = 1024;
    const sizes = ['Bytes', 'Ko', 'Mo'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
}

function updateFileLabel() {
    const fileText = document.querySelector('.file-text');
    if (selectedFiles.length === 0) {
        fileText.textContent = 'Cliquez pour ajouter des photos';
    } else {
        fileText.textContent = `${selectedFiles.length} fichier(s) s√©lectionn√©(s)`;
    }
}

// Modification du formulaire pour inclure les fichiers
document.getElementById('contactForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const formData = new FormData(this);

    // Supprimer les anciens fichiers et ajouter les nouveaux
    formData.delete('files[]');
    selectedFiles.forEach(file => {
        formData.append('files[]', file);
    });

    // Ici, envoyez formData √† votre backend
    console.log('Formulaire soumis avec', selectedFiles.length, 'fichiers');

    // Exemple d'envoi (√† adapter selon votre backend)
    fetch('votre-url-de-traitement.php', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        alert('Votre demande a √©t√© envoy√©e avec succ√®s !');
        this.reset();
        selectedFiles = [];
        fileList.innerHTML = '';
        updateFileLabel();
    })
    .catch(error => {
        alert('Erreur lors de l\'envoi. Veuillez r√©essayer.');
        console.error('Erreur:', error);
    });
});
    </script>
</body>
</html>